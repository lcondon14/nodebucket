"use strict";(self.webpackChunknodebucket=self.webpackChunknodebucket||[]).push([[919],{4919:(F,c,o)=>{o.r(c),o.d(c,{SecurityModule:()=>Z});var u=o(6814),s=o(95),a=o(9310),l=o(9862),t=o(4946);let p=(()=>{class e{static#t=this.\u0275fac=function(i){return new(i||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-security"]],decls:1,vars:0,template:function(i,r){1&i&&t._UZ(0,"router-outlet")},dependencies:[a.lC],encapsulation:2})}return e})();var g=o(459);let h=(()=>{class e{constructor(n){this.http=n}findEmployeeById(n){return this.http.get("/api/employees/"+n)}static#t=this.\u0275fac=function(i){return new(i||e)(t.LFG(l.eN))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function f(e,d){if(1&e&&(t.TgZ(0,"div",16),t._uU(1),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.hij(" ",n.errorMessage," ")}}function v(e,d){1&e&&(t.TgZ(0,"span"),t._uU(1,"Sign In"),t.qZA())}function y(e,d){1&e&&(t.TgZ(0,"div"),t._UZ(1,"span",17),t._uU(2," Loading... "),t.qZA())}const S=[{path:"",component:p,children:[{path:"signin",component:(()=>{class e{constructor(n,i,r,m,b){this.route=n,this.router=i,this.cookieService=r,this.fb=m,this.securityService=b,this.isLoading=!1,this.signinForm=this.fb.group({empId:[null,s.kI.compose([s.kI.required,s.kI.pattern("^[0-9]*$")])]}),this.sessionUser={},this.errorMessage=""}signin(){this.isLoading=!0,console.log("signinForm",this.signinForm.value);const n=this.signinForm.controls.empId.value;if(!n||isNaN(parseInt(n,10)))return this.errorMessage="The employee ID you entered is invalid. Please try again.",void(this.isLoading=!1);this.securityService.findEmployeeById(n).subscribe({next:i=>{console.log("employee",i),this.sessionUser=i,this.cookieService.set("session_user",n,1),this.cookieService.set("session_name",`${i.firstName} ${i.lastName}`,1);const r=this.route.snapshot.queryParamMap.get("returnUrl")||"/";this.isLoading=!1,this.router.navigate([r])},error:i=>{this.isLoading=!1,this.errorMessage=i.error.message?i.error.message:i.message}})}static#t=this.\u0275fac=function(i){return new(i||e)(t.Y36(a.gz),t.Y36(a.F0),t.Y36(g.N),t.Y36(s.qu),t.Y36(h))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-signin"]],decls:20,vars:4,consts:[[1,"container"],[1,"row","justify-content-center","mt-5"],[1,"col-lg-4","col-md-6","col-sm-6"],[1,"card","shadow"],[1,"card-title","text-center","boarder-bottom"],[1,"p-3"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"mb-4"],["for","empId",1,"form-label"],["type","text","id","empId","formControlName","empId",1,"form-control"],[1,"d-grid"],["type","submit",1,"btn","btn-dark"],[4,"ngIf"],["routerLink","/",1,"text-dark","text-underline-hover"],["role","alert",1,"alert","alert-danger"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(i,r){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2",5),t._uU(6,"Employee Sign In"),t.qZA()(),t.YNc(7,f,2,1,"div",6),t.TgZ(8,"div",7)(9,"form",8),t.NdJ("ngSubmit",function(){return r.signin(),r.signinForm.reset()}),t.TgZ(10,"div",9)(11,"label",10),t._uU(12,"Employee ID:"),t.qZA(),t._UZ(13,"input",11),t.qZA(),t.TgZ(14,"div",12)(15,"button",13),t.YNc(16,v,2,0,"span",14),t.YNc(17,y,3,0,"div",14),t.qZA()()()()(),t.TgZ(18,"a",15),t._uU(19,"Return"),t.qZA()()()()),2&i&&(t.xp6(7),t.Q6J("ngIf",r.errorMessage),t.xp6(2),t.Q6J("formGroup",r.signinForm),t.xp6(7),t.Q6J("ngIf",!r.isLoading),t.xp6(1),t.Q6J("ngIf",r.isLoading))},dependencies:[u.O5,a.rH,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u]})}return e})(),title:"Nodebucket Signin"}]}];let I=(()=>{class e{static#t=this.\u0275fac=function(i){return new(i||e)};static#e=this.\u0275mod=t.oAB({type:e});static#i=this.\u0275inj=t.cJS({imports:[a.Bz.forChild(S),a.Bz]})}return e})(),Z=(()=>{class e{static#t=this.\u0275fac=function(i){return new(i||e)};static#e=this.\u0275mod=t.oAB({type:e});static#i=this.\u0275inj=t.cJS({imports:[u.ez,I,s.u5,s.UX,a.Bz,l.JF]})}return e})()}}]);